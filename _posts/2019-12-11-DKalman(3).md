---
title: "칼만필터의 시작"  
excerpt: "튜토리얼 3"  
categories:  
  - Kalman
tags: [Kalman]
comments: true
---
# 칼만필터 (3)
칼만필터는 예측단계와 추정(업데이트) 두개의 시퀀스를 가지는 필터이다.  
그런데 사실 디테일하게 이야기 하자면 할게 좀더 남았다.  

>1. 대충 이전의 데이터를 가지고 다음에 들어올 입력값을 예상해놓는다 (예측단계)   
> **1.5 예측값의 분산의 계산 (공분간 계산단계)** 
>2. 입력이 들어왔다. (관측)
>3. 입력데이터와 예측데이터를 비교해서 최적의 출력값을 추정 (업데이트 단계)


# 측정을 해보았어요

자 이제 실제로 측정을 하기 전에 예측을 다 해놨다.    
이제는 측정을해 봤다고 하자.  
측정의 단계에도 우리는 모델을 이용할 필요가있다.  

> 아니 측정에 모델이 필요해요?

네, 보통 우리가 원하는 데이터는 측정값을 그대로 쓰는게아니고  
좌표변환이 일어난다던지 (가속도센서, 자이로센서), 값이 뻥튀기 되어서 나온다던지 (힘센서등등),   
즉, 우리가 생각하는대로 측정이 일어난다고 생각하지말라  

측정값을 $$z_k$$ 라고하자  
방금 설명한대로, 측정행렬 (Observation matrix) 인 $$H$$ 는 여기서는 다음과같이 두겠다.  

$$ H: \begin{bmatrix}
    1 & 0\\
    0 & 1
    \end{bmatrix} $$
 
일반적인 모델의 모습은 다음과 같다.  

$$z_k = H_k x_k + v_k$$

그러니까 측정값 $$z_k$$을 가지고 실제의 $$x_k$$ 를 추정하러 가는것이다.  
여기서도 똑같이 계측 노이즈 $$v_k$$ 를 모델안에 집어넣은것을 알수있다.  
그러면 이것도 가우시안 분포를 따른다고 가정을 한다.

$$v_k \sim \mathcal{N}(0,R_k)$$

