---
title: "칼만필터의 시작"  
excerpt: "튜토리얼 1"  
categories:  
  - Kalman
tags: [Kalman]
---
# 칼만필터 (2)
칼만필터는 예측단계와 추정(업데이트) 두개의 시퀀스를 가지는 필터이다.  
그런데 사실 디테일하게 이야기 하자면 할게 좀더 남았다.  

>1. 대충 이전의 데이터를 가지고 다음에 들어올 입력값을 예상해놓는다 (예측단계)   
> **1.5 예측값의 분산의 계산 (공분간 계산단계)** 
>2. 입력이 들어왔다. (관측)
>3. 입력데이터와 예측데이터를 비교해서 최적의 출력값을 추정 (업데이트 단계)

# (공)분산이 뭔가요 먹는건가요?  
보통 분산하면 뭐가 떠오르는가 ?  
더쉽게 말하자면, 데이터의 산만한 정도이다.    
어떤 정밀한 기계도 측정/예측에는 반드시 오차가 따른다.    
이것은 왜냐하면 우리는 진치 (True Value) 를 알 수 없고, 불확실한 측정에 의해서 진짜값을 추정할 수 밖에 없는것이다.  
즉 어떠한 **노이즈가 발생한다**.  

주의하라  
지금 **우리는 측정이 아니라 모델에 의한 예측을 하는 단계이다.**  
칼만필터는 이것을 프로세스에 의한 노이즈 $$w$$ (Process noise) 라고 하고 모델안에 집어넣는다.  

> 왜 측정 오차가 아닌가요?

지금은 측정에 관한 노이즈가 아니라 예측치에 관한 노이즈를 생각하고 있기떄문에 프로세스 노이즈이다.  

$$x_k = \Phi_{k-1}x_{k-1} + w_{k-1}$$

이러면 의문이 생길것이다.  
  
> 아니 우리가 노이즈를 식안에 넣을 수 있으면 진작에 넣었지...
> 그걸 모르니까 개고생하는거 아니야..

라고생각할 수있다.  
그래서 칼만씨는 이 노이즈를 가우시안 분포를 따른다고 가정을 했다.  
이걸 식으로 쓰면  

$$w_k \sim \mathcal{N}(0,Q_k)$$

$$\mathcal{N}$$ 요거는 가우시안을 따른다 라는 의미이고  
$$\mathcal{N}(평균값,분산값)$$ 으로 표현을 한다.  
이렇게 되면 **$$x_k$$ 자체가 가우시안 분포를 따르게 된다!**  

근데 여기서 공분산이라고 하는 경우도 있다.  
공분산은, 아까 정의한 상태공간벡터의 분산행렬이다.  
여기서는 데이터의 산만한정도를 표현하는 행렬이라고만 알아두자.  

# 측정을 해보았어요

자 이제 실제로 측정을 하기 전에 예측을 다 해놨다.  
이제는 측정을해 봤다고 하자.  